---
title: 'ServersMan VPSでWebサーバー構築#2(ドメイン取得)'
author: しゃまとん
type: post
date: 2013-08-13T16:31:22+00:00
url: /posts/14
categories:
  - Web関連
  - サーバー構築

---
では次にWebサーバーを構築…の前にドメインを取得しましょう。  
ドメインがないと、ホームページに名前でアクセスすることができません。

私の環境は、有料ドメインを使用せず、無料ドメインを取得して使用しています。  
[ダイナミックDNSサービス &#8211; ie.Server.net][1]  
こだわりのある方は[お名前.com][2]などのサービスを利用するとよいでしょう。

ここで、VPSのサーバーのIPアドレスをieServerに通知してやる必要があります。  
DiCEという、IPが変更された時に通知するサービスを利用します。  
VPSなので、基本IPは固定ですが、使用しても問題ありません。

以下、インストールと設定手順です。  
作業は基本的にスーパーユーザ(su)で行います。

<!--more-->

  1. DiCEのインストール <pre class="brush: bash; gutter: true">cd /usr/local/bin
wget http://www.hi-ho.ne.jp/cgi-bin/user/yoshihiro_e/download.cgi?p=diced019
tar zxvf diced01913.tar.gz
rm -f diced01913.tar.gz</pre>

  2. DiCE設定  
    スクリプト実行時に文字化けしてしまうので、ターミナルの文字コードをEUC-JPに一時的に変更し、設定が終了したら元に戻しましょう。</p> <pre class="brush: bash; gutter: true">setarch `uname -m` /usr/local/bin/DiCE/diced</pre>
    
    下記の通りに設定。  
    IPアドレスがとれない場合は[ここ][3]を参照する。
    
    <pre class="brush: bash; gutter: true">=-=-=- DiCE DynamicDNS Client -=-=-=
Version 0.19 for Japanese
Copyright(c) 2001 sarad

:setup
IPアドレスの検出方法を指定してください
(0) 自動検出
(1) ローカルのネットワークアダプタから検出
(2) 外部のスクリプトから検出
&lt;現在:0&gt;
(N)変更しない  (P)戻る
&gt;n
-------------------------------------------------
プライベートIPアドレスも検出対象ですか？ (Y/N)
&lt;現在:いいえ&gt;
(P)戻る
&gt;n
-------------------------------------------------
IPアドレスの検出をテストしますか？ (Y/N)
(P)戻る
&gt;y
検出IPアドレス&gt;XXX.XXX.XXX.XXX #IPが正しいか確認
-------------------------------------------------
IPアドレスの検出をテストしますか？ (Y/N)
(P)戻る
&gt;n
-------------------------------------------------
IPアドレスをチェックする間隔を指定してください(分)
設定可能範囲は5分以上です
&lt;現在:10&gt;
(N)変更しない  (P)戻る
&gt;n
=================================================
DNSサーバーの負荷を軽減するために頻繁なDNS更新を防ぐ必要があります
前回の更新から一定時間DNS更新処理を行わないように保護時間を設定して
ください(分)  設定可能範囲は10分から1440分です
&lt;現在:60&gt;
(N)変更しない  (P)戻る
&gt;N
=================================================
設定を保存しますか? (Y/N)
(P)戻る
&gt;y
設定を保存しました
=================================================
:add　←　IPアドレスの自動更新イベントを追加する
新しくイベントを追加します

DynamicDNSサービス名を入力してください
"?"で対応しているサービスを一覧表示します
(P)戻る
&gt;ieServer
&lt;&lt; ieServer Project &gt;&gt;
URL: http://www.ieserver.net/
*** 情報 ***
IPアドレスはサーバー側で自動検出します。
IPアドレスの指定は出来ません。
（入力しても無視されます）
=================================================
ドメイン名を入力してください
"?"でドメイン一覧を表示します
(P)戻る
&gt;orz.hm　# ドメイン名(各自変更して下さい)
ホスト名を入力してください
(P)戻る
&gt;空ENTER
=================================================
ログインユーザ名を入力してください
(P)戻る
&gt;shamaotn　#　サブドメイン名(各自変更してください)
=================================================
ログインパスワードを入力してください
(P)戻る
&gt;xxxxxxxx　←　ユーザ登録時に入力したパスワード
=================================================
登録するIPアドレスを入力してください
空白にすると現在のIPアドレスを自動検出します
(P)戻る
&gt;空ENTER
=================================================
このイベントに題名を付けてください
(P)戻る
&gt;IPアドレス更新
=================================================
このイベントを実行するスケジュールを設定します
-------------------------------------------------
実行する頻度を指定してください (番号入力)
(0)１回のみ (1)１日１回 (2)１週間に１回 (3)１ヵ月に１回
(4)その他の周期 (5)IPアドレス変化時 (6)起動時
(P)戻る
&gt;5
-------------------------------------------------
IPアドレスがあまり変化しない環境の場合、更新せずに一定期間を過ぎると
アカウントを削除されてしまうことがあります
IPアドレスの変化が無い時に実行する間隔を指定してください
(0)7日毎   (1)14日毎  (2)21日毎  (3)28日毎
(4)35日毎  (5)56日毎  (6)84日毎
(P)戻る
&gt;0
=================================================
詳細オプションを設定します
-------------------------------------------------
[ オフライン ]
(0)No (1)Yes 
番号&gt;0
=================================================
このイベントを有効にしますか? (Y/N)
(イベントの有効/無効は"EN/DIS"コマンドで切替えられます)
&gt;y
=================================================
イベントを保存しますか? (Y/N)
&gt;y
イベント"IPアドレス更新"を保存しました
=================================================
:list　#　イベントを確認
(No.)   (イベント名)                   (スケジュール)             (次回予定) 
  0 *  Pアドレス更新 IPアドレス変化時 (７日毎)   12/09 18:32 
:ex 0
+ 12/2 18:33 にIPアドレス更新が実行されました
  IPアドレスを更新しました
:exit</pre>

  3. DiCE起動 <pre class="brush: bash; gutter: true">setarch `uname -m` /usr/local/bin/DiCE/diced -d -l</pre>

  4. 自動起動設定 <pre class="brush: bash; gutter: true">echo "setarch `uname -m` /usr/local/bin/DiCE/diced -d -l" &gt;&gt; /etc/rc.local</pre>

  5. ドメイン確認  
    ここを参考に確認してみる。  
    [ドメイン名取得 &#8211; ドメイン名確認][4]

これで設定完了です。  
下記のサイトが参考になりました。  
[ドメイン名取得(ieServer.Net編)][4]

次にWebサーバーを構築していきます。

 [1]: http://ieserver.net
 [2]: http://www.onamae.com/
 [3]: http://blog.aburami.net/archives/53915071.html
 [4]: http://centossrv.com/domain-ieserver.shtml